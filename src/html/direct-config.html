<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>M3U Configuration</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="dark light">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="page-config">
<header class="site-header">
    <div class="inner">
        <center><h1 class="app-title">M3U Configuration</h1></center>
        <center><p class="subtitle">Use a M3U playlist URL.</p></center>
    </div>
</header>

<main class="main-content narrow">
    <form id="directForm" class="config-form" autocomplete="off">
        <fieldset>
            <legend>Playlist Source</legend>
            <div class="form-group">
                <label for="m3uUrl">M3U Playlist URL <span class="req">*</span></label>
                <input type="url" id="m3uUrl" name="m3uUrl" required placeholder="https://example.com/playlist.m3u">
                <small class="hint">HTTP(S) only. If the playlist requires credentials include them in the URL or use Xtream mode.</small>
            </div>
        </fieldset>

        <fieldset>
            <legend>EPG (Guide)</legend>
            <div class="form-group checkbox-line">
                <input type="checkbox" id="enableEpg" name="enableEpg" checked>
                <label class="checkbox-label" for="enableEpg">Enable EPG</label>
            </div>
            <div class="form-group">
                <label for="epgUrl">EPG XML URL (optional)</label>
                <input type="url" id="epgUrl" name="epgUrl" placeholder="https://example.com/guide.xml">
            </div>
            <div class="form-group">
                <label for="epgOffsetHours">EPG Offset (hours)</label>
                <input type="number" step="0.25" id="epgOffsetHours" name="epgOffsetHours" placeholder="0">
                <small class="hint">Shift programme times forward/backward (e.g. -1, 2, 0.5).</small>
            </div>
        </fieldset>

        <fieldset>
            <legend>Diagnostics</legend>
            <div class="form-group checkbox-line">
                <input type="checkbox" id="debugMode" name="debugMode">
                <label class="checkbox-label" for="debugMode" class="inline">Enable Debug Logging</label>
            </div>
        </fieldset>

        <div class="form-actions">
            <button type="submit" class="btn primary wide">Install / Update</button>
            <a href="/" class="btn subtle">↩️ Home</a>
        </div>
    </form>
</main>

<footer class="site-footer">
    <div class="inner">
        <p>&copy; © 2026 M3U/Xtream Addon</p>
    </div>
</footer>

<div id="loaderOverlay" class="overlay hidden">
    <div class="overlay-box">
        <header class="overlay-header">
            <h2 id="loaderMessage">Starting…</h2>
            <p class="overlay-sub" id="progressText">0%</p>
        </header>
        <div class="progress-track"><div id="progressBar" class="progress-fill" style="width:0%"></div></div>
        <pre id="statusDetails" class="status-log" aria-live="polite"></pre>
        <div class="overlay-actions">
            <button id="openStremioBtn" class="btn success" disabled>Open in Stremio</button>
            <button id="copyManifestBtn" class="btn secondary" disabled>Copy Manifest URL</button>
        </div>
    </div>
</div>

<script src="/js/configure-common.js"></script>
<script src="/js/direct-config.js"></script>
</body>
</html>
